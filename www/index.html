<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8">
    <title>FatturaPA testUI - Dashboard</title>
    <!-- Custom styles for this template-->
             <link href="css/sb-admin.css" rel="stylesheet">    
     <link rel="stylesheet" href="css/bootstrap-italia.min.css" />
     <link rel="stylesheet" href="css/italia-icon-font.css" /> 
     <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">    
    
    <script type="text/javascript" src="js/vue.min.js"></script>
  </head>
  <body id="page-top">

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <h1 class="navbar-brand">FatturaPA TestUI</h1>
      <span id="dateTime"></span>
    </nav>

    <div id="wrapper">
    
<!-- Sidebar -->
<ul class="sidebar navbar-nav">
  <li class="nav-item active">
    <a class="nav-link" href="index.html">
      <i class="fas fa-fw fa-tachometer-alt"></i>
      <span>Dashboard</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="sdi.html">
      <i class="fas fa-fw fa-exchange-alt"></i>
      <span>SDI</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="td0000001.html">
      <i class="fas fa-fw fa-building"></i>
      <span>TD0000001</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="td0000002.html">
      <i class="fas fa-fw fa-building"></i>
      <span>TD0000002</span>
    </a>
  </li>
</ul>

<div id="content-wrapper">
  <div class="container-fluid">
    <div class="card col-md-6">
      <div class="card-body">
        <h5 class="card-title border-bottom border-italia">Dashboard</h5>
        <div class="form-group">
          <p>Do you want to clear (reset) the state?</p>
          <button type="button" onclick="post('/sdi/rpc/clear');" class="btn mb-1 btn-primary">Reset</button>
        </div>
        <div class="form-group">
          <p>Set the simulated date and time</p>
          <div class="input-group">
            <input id="dt" type="datetime-local" class="form-control" aria-label="date" value="0000-00-00T00:00">
            <button type="button" onclick="post('/sdi/rpc/timestamp', 'timestamp', 'dt');" class="btn mb-1 btn-primary">Save</button>
          </div>
        </div>  
        <div class="form-group">
          <p>Set factor for simulated time to wallclock time</p>
          <div class="input-group">
            <input id="speed" type="number" min="1" max="1000000000" class="form-control" aria-label="speed">
            <button type="button" onclick="post('/sdi/rpc/speed', 'speed', 'speed');" class="btn mb-1 btn-primary">Save</button>
          </div>
        </div>
        <div class="form-group">
          <p>Current simulation time </p>
          <p><span id="simtime"></span></p>
          <button type="button" onclick="get('/sdi/rpc/datetime', 'simtime');" class="btn mb-1 btn-primary">Show</button>
        </div>
      </div>  <!-- /.card-body -->
    </div>  <!-- /.card mb-3 -->    
  </div>  <!-- /.container-fluid -->
</div> <!-- /.content-wrapper -->

    </div> <!-- /#wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <span>^</span>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin.min.js"></script>

        <script type="text/javascript" src="js/common.js"></script>
    <script type="text/javascript" src="js/InvoiceTable.js"></script>
    <script type="text/javascript" src="js/InvoiceTable2.js"></script>
    <!-- Sticky Footer -->
    <footer class="sticky-footer">
        <div class="container my-auto">
            <div class="text-center my-auto">
              <span class="copyright">
                &copy; Copyright 2018 by <a target="_blank" href="https://simevo.com/">simevo.com</a> - <a target="_blank" href="https://github.com/simevo/fatturapa-testui">source code available here</a></span>
            </div>
        </div>
    </footer>
    
<script type="text/javascript">
// prefill date time speed form
$(document).ready(function(){
    var url = window.location.protocol + "//" + window.location.host + "/";
    url = url + "sdi/rpc/datetime";
    $.ajax({
    url: url,
    dataType: 'json',
    success: function( data ) {
        var dateTime = data.datetime;
        var date = dateTime.substr(0, 10); //yyyy-mm-dd        
        var time = dateTime.substr(11, 5); //00:00
        var dt = date+"T"+time; //yyyy-mm-ddT00:00
        $('#dt').val(dt);

        var speed = data.speed;
        $('#speed').val(speed);
    },
    error: function( data ) {
            Toastify({
              text: "Errore nel prefill form (" + url + "), riprova.",
              duration: 5000,
              close: true,
              gravity: "top",
              backgroundColor: "linear-gradient(to right, #ff5f6d, #ffc371)",                  
            }).showToast(); 
    }
  });
});
</script>

      <script src="js/bootstrap-italia.bundle.min.js"></script>
    <script src="js/bootstrap-italia.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
      
  </body>
</html>
